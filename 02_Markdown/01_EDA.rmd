---
title: "01_EDA"
author: "Matt Dube"
date: "12/4/2018"
output:
  html_document:
    keep_md: yes
    toc: yes
  word_document:
    toc: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Load libraries 
```{r, warning=FALSE, message=FALSE}
library(here)
library(readr)
library(dplyr)
library(skimr)
library(broom)
```
Load data
```{r, message=FALSE}
customer <- read_csv(here("00_Data/raw", "WA_Fn-UseC_-Telco-Customer-Churn.csv"))

```
Quick check of front/back/structure
```{r}
customer %>% head(10)
customer %>% tail(10)
skim(customer)
```
It looks like there are no missing values except in TotalCharges, let's do an explicit check by column to be sure.
```{r}
customer %>% 
    select(everything()) %>% 
    summarise_all(funs(sum(is.na(.))))
```
No other missing values. Only .15% of values are missing - there is not really a wrong way to handle this.  
Here are the choices:

* delete the records - again, only 11 of 7043 records will be removed.
* create an indicator variable to show missingness - not ideal, will be 7032 0's, and only 11 1's.
* impute during model training - using knnImpute or bagImpute.  Might consider this for the practice, not for any expected bump in model performance.


Target variable is 'Churn'.  Review class distribution.
```{r}
table(customer$Churn)
prop.table(table(customer$Churn))
```
Class is 3/4 'No', 1/4 'Yes'.  Make a note to review this during modeling, may need to consider trying a couple of sampling methods to balance the classes for model fitting.  Problem is binary classification, which will provide us with a number of options to try when fitting different models.

Additional notes to review during data cleaning:

* there are several binary features that can be encoded as 1/0.
    + Gender, SeniorCitizen, Partner, PhoneService
* there are several more features that have only a few classes, so are good candidates for one-hot encoding (this can be done during preProcessing, or we can let caret take care of it under the hood during training).
    + Looks like most of the other features fall into this area.
* customerID can be dropped - it's unique, only adds 'noise'.
* looks like only MonthlyCharges and TotalCharges are numeric.  Check their correlation to determine if they are both needed.
* tenure is an integer - looks to be measured in months.  

